---
// Layout.astro - Page layout with sidebar (matches sailorsuccess.online)
// Used for all content pages: homepage, category pages, article pages
import BaseLayout from './BaseLayout.astro';

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonicalURL?: string;
  showSidebar?: boolean;
  collection?: string;
}

const {
  title,
  description,
  image,
  canonicalURL,
  showSidebar = true,
  collection = '',
} = Astro.props;
---

<BaseLayout {title} {description} {image} {canonicalURL}>
  <main>
    <div class="page-container">
      {showSidebar && (
        <aside class="sidebar" id="sidebar">
          <!-- Search Box -->
          <div class="search-box" id="sidebarSearch">
            <input type="search" placeholder="Search articles..." class="search-input" id="searchInput" autocomplete="off" />
            <div class="search-results" id="searchResults"></div>
          </div>

          <!-- Browse Topics -->
          <div class="glass-card">
            <h3 class="sidebar-heading">Browse Topics</h3>
            <ul class="topic-nav" role="list">
              <li><a href="/learn/" class="topic-link">üìö Learn</a></li>
              <li><a href="/careers/" class="topic-link">‚öì Careers</a></li>
              <li><a href="/money/" class="topic-link">üí∞ Money</a></li>
              <li><a href="/rights/" class="topic-link">‚öñÔ∏è Rights</a></li>
              <li><a href="/tools/" class="topic-link">üîß Tools</a></li>
            </ul>
          </div>

          <!-- Most Read -->
          <div class="glass-card" id="mostReadCard">
            <h3 class="sidebar-heading">Most Read</h3>
            <ul class="popular-list" role="list" id="mostReadList">
              <li><a href="/careers/merchant-navy-salary-guide/" class="popular-link">Merchant Navy Salary Guide 2026</a></li>
              <li><a href="/learn/cdc-application-process-india-2026/" class="popular-link">CDC Application Process India</a></li>
              <li><a href="/careers/how-to-join-merchant-navy-after-12th/" class="popular-link">How to Join After 12th</a></li>
              <li><a href="/rights/seafarer-rights-india/" class="popular-link">Seafarer Rights in India</a></li>
              <li><a href="/tools/sea-time-calculator/" class="popular-link">Sea Time Calculator</a></li>
            </ul>
          </div>

          <!-- Also Read (dynamic - populated by ss-enhance.js) -->
          <div class="glass-card" id="alsoReadCard">
            <h3 class="sidebar-heading">Also Read</h3>
            <ul class="popular-list" role="list" id="alsoReadList">
            </ul>
          </div>

          <!-- Free Resource CTA -->
          <div class="glass-card cta-card">
            <h3 class="cta-card-title">Free Resources</h3>
            <p class="cta-card-text">Download free study materials, templates, and career guides for seafarers.</p>
            <a href="https://sailorsuccess.graphy.com/store" class="cta-card-btn" target="_blank" rel="noopener">Browse Courses</a>
          </div>

          <!-- Why Trust Us -->
          <div class="glass-card trust-card">
            <h3 class="sidebar-heading">Why Trust Us</h3>
            <p class="trust-text">Written by active merchant navy officers with verified maritime experience. All content reviewed by industry professionals.</p>
            <a href="/contributors/" class="trust-link">Meet our contributors ‚Üí</a>
          </div>
        </aside>
      )}

      <main class="main-content" id="mainContent">
        <slot />
      </main>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <a href="/" class="footer-logo">
            <img src="https://sailorsuccess.online/logo-white.webp" alt="Sailor Success" width="160" height="40" />
          </a>
          <p class="footer-tagline">India's Complete Merchant Navy Knowledge Base</p>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">Learn</h4>
          <ul class="footer-links" role="list">
            <li><a href="/learn/" class="footer-link">All Guides</a></li>
            <li><a href="/learn/cdc-application-process-india-2026/" class="footer-link">CDC Process</a></li>
            <li><a href="/learn/indos-registration-guide/" class="footer-link">INDOS Registration</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">Careers</h4>
          <ul class="footer-links" role="list">
            <li><a href="/careers/" class="footer-link">Career Guides</a></li>
            <li><a href="/careers/merchant-navy-salary-guide/" class="footer-link">Salary Guide</a></li>
            <li><a href="/careers/how-to-join-merchant-navy-after-12th/" class="footer-link">Join After 12th</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">Rights & Tools</h4>
          <ul class="footer-links" role="list">
            <li><a href="/rights/" class="footer-link">Seafarer Rights</a></li>
            <li><a href="/tools/" class="footer-link">Online Tools</a></li>
            <li><a href="/sailorgpt/" class="footer-link">SailorGPT AI</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4 class="footer-heading">Company</h4>
          <ul class="footer-links" role="list">
            <li><a href="/about/" class="footer-link">About Us</a></li>
            <li><a href="/contact/" class="footer-link">Contact</a></li>
            <li><a href="/contributors/" class="footer-link">Contributors</a></li>
            <li><a href="/privacy/" class="footer-link">Privacy Policy</a></li>
            <li><a href="/terms/" class="footer-link">Terms of Use</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p class="footer-copyright">&copy; {new Date().getFullYear()} Sailor Success. All rights reserved.</p>
        <p class="footer-disclaimer">Content is for informational purposes only. Always verify with official maritime authorities.</p>
      </div>
    </div>
  </footer>
</BaseLayout>
