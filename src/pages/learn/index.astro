---
import { getCollection } from 'astro:content';
import BaseLayout from '../../ui/layouts/BaseLayout.astro';

const articles = await getCollection('learn');
const sorted = articles.sort((a, b) => {
  const da = (a.data.publishDate ?? a.data.pubDate)?.valueOf() ?? 0;
    const db = (b.data.publishDate ?? b.data.pubDate)?.valueOf() ?? 0;
      return db - da;
      });
      ---

      <BaseLayout
        title="Learn | Sailor Success"
          description="Comprehensive learning guides for merchant navy professionals â€” DNS, GME, CoC exams, STCW, MARPOL, ISM, navigation, cargo operations and more."
          >
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

                <!-- Hero -->
                    <div class="mb-12 text-center">
                          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/10 border border-red-500/20 text-red-400 text-sm font-medium mb-6">
                                  <span>ðŸ“š</span> Knowledge Hub
                                        </div>
                                              <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-4">
                                                      Learn <span class="text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-rose-400">Maritime</span>
                                                            </h1>
                                                                  <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                                                                          From DNS/GME admission to STCW regulations, CoC exams, and shipboard operations â€” everything you need to know to excel at sea.
                                                                                </p>
                                                                                    </div>

                                                                                        <!-- Article Grid -->
                                                                                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                                                                                  {sorted.map(article => (
                                                                                                          <a
                                                                                                                    href={`/learn/${article.slug}`}
                                                                                                                              class="group p-6 bg-gray-900/60 backdrop-blur-xl border border-red-500/10 hover:border-red-500/30 rounded-2xl shadow-lg transition-all duration-300 hover:-translate-y-1 hover:shadow-red-900/20"
                                                                                                                                      >
                                                                                                                                                <div class="text-xs font-semibold uppercase tracking-widest text-red-400 mb-3">
                                                                                                                                                            {article.data.subcategory ?? article.data.category ?? 'Learn'}
                                                                                                                                                                      </div>
                                                                                                                                                                                <h2 class="text-lg font-bold text-white mb-3 group-hover:text-red-300 transition-colors line-clamp-2">
                                                                                                                                                                                            {article.data.title}
                                                                                                                                                                                                      </h2>
                                                                                                                                                                                                                <p class="text-gray-400 text-sm line-clamp-3 mb-4">
                                                                                                                                                                                                                            {article.data.description}
                                                                                                                                                                                                                                      </p>
                                                                                                                                                                                                                                                <div class="flex items-center justify-between text-xs text-gray-500">
                                                                                                                                                                                                                                                            <span>{article.data.readTime ?? 5} min read</span>
                                                                                                                                                                                                                                                                        <span class="text-red-400 group-hover:translate-x-1 transition-transform">Read â†’</span>
                                                                                                                                                                                                                                                                                  </div>
                                                                                                                                                                                                                                                                                          </a>
                                                                                                                                                                                                                                                                                                ))}
                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                        {sorted.length === 0 && (
                                                                                                                                                                                                                                                                                                              <div class="text-center py-24 text-gray-500">
                                                                                                                                                                                                                                                                                                                      <div class="text-5xl mb-4">ðŸ“š</div>
                                                                                                                                                                                                                                                                                                                              <p class="text-xl">Articles coming soon...</p>
                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                        )}
                                                                                                                                                                                                                                                                                                                                          </div>
                                                                                                                                                                                                                                                                                                                                          </BaseLayout>
